(self.webpackChunkwebpack_demo=self.webpackChunkwebpack_demo||[]).push([[143],{599:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(772),n=i.n(s),o=i(464),r=i.n(o)()(n());r.push([t.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  user-select: none;\n  font-weight: bold;\n  font-size: 14px;\n}\ncanvas {\n  background: #b7d4a8;\n}\n#controller {\n  position: fixed;\n  top: 0;\n  right: 10px;\n}\n","",{version:3,sources:["webpack://./src/style/index.less"],names:[],mappings:"AACA;EACI,SAAA;EACA,UAAA;EACA,sBAAA;EACA,iBAAA;EACA,iBAAA;EACA,eAAA;AAAJ;AAGA;EACI,mBAAA;AADJ;AAIA;EACI,eAAA;EACA,MAAA;EACA,WAAA;AAFJ",sourcesContent:["@bg-color: #b7d4a8;\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    user-select: none;\n    font-weight: bold;\n    font-size: 14px;\n}\n\ncanvas {\n    background: @bg-color;\n}\n\n#controller {\n    position: fixed;\n    top: 0;\n    right: 10px;\n}"],sourceRoot:""}]);const a=r},464:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,s){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(s)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(n[r]=!0)}for(var a=0;a<t.length;a++){var h=[].concat(t[a]);s&&n[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),e.push(h))}},e}},772:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}t.exports=function(t){var i,s,n=(s=4,function(t){if(Array.isArray(t))return t}(i=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(s=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}return i}}(i,s)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(t,i):void 0}}(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[1],r=n[3];if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),c="/*# ".concat(h," */"),l=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[o].concat(l).concat([c]).join("\n")}return[o].join("\n")}},574:(t,e,i)=>{"use strict";var s,n=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),o=[];function r(t){for(var e=-1,i=0;i<o.length;i++)if(o[i].identifier===t){e=i;break}return e}function a(t,e){for(var i={},s=[],n=0;n<t.length;n++){var a=t[n],h=e.base?a[0]+e.base:a[0],c=i[h]||0,l="".concat(h," ").concat(c);i[h]=c+1;var d=r(l),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:l,updater:g(p,e),references:1}),s.push(l)}return s}function h(t){var e=document.createElement("style"),s=t.attributes||{};if(void 0===s.nonce){var o=i.nc;o&&(s.nonce=o)}if(Object.keys(s).forEach((function(t){e.setAttribute(t,s[t])})),"function"==typeof t.insert)t.insert(e);else{var r=n(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(e)}return e}var c,l=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function d(t,e,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(t.styleSheet)t.styleSheet.cssText=l(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function p(t,e,i){var s=i.css,n=i.media,o=i.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var u=null,f=0;function g(t,e){var i,s,n;if(e.singleton){var o=f++;i=u||(u=h(e)),s=d.bind(null,i,o,!1),n=d.bind(null,i,o,!0)}else i=h(e),s=p.bind(null,i,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var i=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var s=0;s<i.length;s++){var n=r(i[s]);o[n].references--}for(var h=a(t,e),c=0;c<i.length;c++){var l=r(i[c]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}i=h}}}},398:(t,e,i)=>{"use strict";var s=i(574),n=i.n(s),o=i(599);n()(o.Z,{insert:"head",singleton:!1}),o.Z.locals;class r{constructor(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.isShowGrid=!1,this.gap=10,this.isGameOver=!1,this.grid=new class{constructor(t,e,i=1,s="#00000060"){this.canvas=t,this.gap=e,this.lineWidth=i,this.color=s,this.draw()}draw(){const t=this.canvas.getContext("2d"),e=this.canvas.width,i=this.canvas.height;t.save(),t.strokeStyle=this.color;for(let s=0;s*this.gap<e;s++)t.beginPath(),t.moveTo(s*this.gap,0),t.lineTo(s*this.gap,i),t.stroke(),t.closePath();for(let s=0;s*this.gap<i;s++)t.beginPath(),t.moveTo(0,s*this.gap),t.lineTo(e,s*this.gap),t.stroke(),t.closePath()}}(this.canvas,this.gap),this.fps=new class{constructor(t,e={font:"24px arial",fillColor:"#00f",position:{x:0,y:50}}){this.canvas=t,this.fontOptions=e,this.startTime=0,this.context=this.canvas.getContext("2d")}draw(t){let e="0";this.startTime&&(e=(1e3/(t-this.startTime)).toFixed(0)),this.context.save(),this.context.fillStyle=this.fontOptions.fillColor,this.context.font=this.fontOptions.font,this.context.fillText("fps: "+e,this.fontOptions.position.x,this.fontOptions.position.y),this.context.restore(),this.startTime=t}}(this.canvas),this.food=new class{constructor(t,e="circle",i){this.canvas=t,this.shape=e,this.gap=i,this.x=40,this.y=40,this.context=this.canvas.getContext("2d")}getPosition(){return{x:this.x,y:this.y}}setPosition(t){let e=Math.floor(this.canvas.width/this.gap),i=Math.floor(this.canvas.height/this.gap);t.x<1?t.x=1:t.x>e&&(t.x=e),t.y<1?t.y=1:t.y>i&&(t.y=i),this.x=t.x,this.y=t.y}draw(){this.context.save(),this.context.fillStyle="#f00";const t=this.getPosition();switch(this.shape){case"circle":this.context.beginPath(),this.context.arc(t.x*this.gap-this.gap/2,t.y*this.gap-this.gap/2,this.gap/2,0,2*Math.PI),this.context.fill(),this.context.closePath();break;case"square":this.context.fillRect((t.x-1)*this.gap,(t.y-1)*this.gap,this.gap,this.gap)}this.context.restore()}}(this.canvas,"circle",this.gap),this.snake=new class{constructor(t,e,i,s,n="circle"){this.canvas=t,this.gap=e,this.fillColor=i,this.shape=n,this.bodies=[],this.direction="ArrowRight",this.speed=10,this.bodies.push(s),this.context=this.canvas.getContext("2d")}run(t){const e=this.bodies[0];switch(this.direction){case"ArrowLeft":this.bodies.unshift({x:e.x-1,y:e.y});break;case"ArrowRight":this.bodies.unshift({x:e.x+1,y:e.y});break;case"ArrowUp":this.bodies.unshift({x:e.x,y:e.y-1});break;case"ArrowDown":this.bodies.unshift({x:e.x,y:e.y+1})}let i=this.endGame(),s=this.eatFood(t,e);return s||this.bodies.pop(),this.changeSpeed(),{isGameOver:i,isEatFood:s}}eatFood(t,e){return t.x===e.x&&t.y===e.y}endGame(){const t=this.bodies[0];let e=Math.floor(this.canvas.width/this.gap),i=Math.floor(this.canvas.height/this.gap);return t.x<1||t.x>e-1||t.y<1||t.y>i-1||!!(this.bodies.length>1&&this.bodies.slice(1).find((e=>e.x===t.x&&e.y===t.y)))}draw(){this.context.save(),this.context.fillStyle=this.fillColor,this.context.strokeStyle="#f00",this.context.lineWidth=1;for(let t=0;t<this.bodies.length;t++){const e=this.bodies[t];switch(0===t?this.context.moveTo(e.x*this.gap-this.gap/2,e.y*this.gap-this.gap/2):this.context.lineTo(e.x*this.gap-this.gap/2,e.y*this.gap-this.gap/2),this.context.stroke(),this.shape){case"square":this.context.fillRect((e.x-1)*this.gap,(e.y-1)*this.gap,this.gap,this.gap);break;case"circle":this.context.beginPath(),this.context.arc(e.x*this.gap-this.gap/2,e.y*this.gap-this.gap/2,this.gap/2,0,2*Math.PI),this.context.fill(),this.context.closePath()}}this.context.restore()}changeDirection(t){"ArrowLeft"!==t&&"ArrowRight"!==t&&"ArrowUp"!==t&&"ArrowDown"!==t||this.isPrallelDirection(t)||(this.direction=t)}isPrallelDirection(t){return!("ArrowLeft"!==this.direction&&"ArrowRight"!==this.direction||"ArrowLeft"!==t&&"ArrowRight"!==t)||!("ArrowUp"!==this.direction&&"ArrowDown"!==this.direction||"ArrowUp"!==t&&"ArrowDown"!==t)}getSpeed(){return this.speed}setSpeed(t){this.speed=t}changeSpeed(){5===this.bodies.length?this.setSpeed(20):10===this.bodies.length?this.setSpeed(30):20===this.bodies.length&&this.setSpeed(50)}}(this.canvas,this.gap,"#000",{x:3,y:3}),this.init(t,e),document.addEventListener("keydown",this.snakeDirectionHandler.bind(this)),this.loop()}loop(){let t=this.snake.run(this.food.getPosition());if(t.isEatFood){const t=this.snake.bodies;let e=Math.floor(this.canvas.width/this.gap),i=Math.floor(this.canvas.height/this.gap),s=Math.floor(Math.random()*e)+1,n=Math.floor(Math.random()*i)+1;for(;t.find((t=>t.x===s&&t.y===n));)s=Math.floor(Math.random()*e)+1,n=Math.floor(Math.random()*i)+1;s>=e&&(s=e-1),n>=i&&(n=i-1),this.food.setPosition({x:s,y:n})}t.isGameOver?(this.isGameOver=t.isGameOver,clearTimeout(this.timer),this.timer=null):this.timer=setTimeout((()=>{this.timer&&(clearTimeout(this.timer),this.timer=null),this.loop()}),1e3/this.snake.getSpeed())}init(t,e,i="#0f0"){this.canvas.width=t,this.canvas.height=e,i&&(this.canvas.style.background=i),document.body.appendChild(this.canvas),this.draw(0)}draw(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.isGameOver&&(this.context.font="36px 隶书",this.context.fillText("GAME OVER",this.canvas.width/2-100,this.canvas.height/2)),this.isShowGrid&&this.grid.draw(),this.fps.draw(t),this.food.draw(),this.snake.draw(),requestAnimationFrame((t=>this.draw(t)))}snakeDirectionHandler(t){this.snake.changeDirection(t.key)}reStart(t,e){return new r(t,e)}setIsShowGrid(t){this.isShowGrid=t}}const a=r;new class{constructor(t){this.game=t,this.isShowGrid=!1,this.showGridController=document.createElement("div"),this.initController()}initController(){this.showGridController.id="controller",document.body.appendChild(this.showGridController),this.showGridController.innerHTML='\n            <label for="grid">显示网格：</label>\n            <input type="checkbox" id="grid" />\n            <span id="speed">速度：</span>\n        ';const t=document.getElementById("grid");null==t||t.addEventListener("change",(t=>{var e;this.isShowGrid=t.target.checked,null===(e=this.game)||void 0===e||e.setIsShowGrid(this.isShowGrid)})),this.freshSpeed()}freshSpeed(){var t;const e=document.getElementById("speed");e&&(e.innerHTML="速度："+(null===(t=this.game)||void 0===t?void 0:t.snake.getSpeed())),setTimeout((()=>{this.freshSpeed()}),100)}}(new a(window.innerWidth-10,window.innerHeight-10))}},t=>{"use strict";t(t.s=398)}]);
//# sourceMappingURL=app.bundle.js.map